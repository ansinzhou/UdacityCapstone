{% extends  'layout.html' %}

{% block content %}
<div class="container-fluid">
    <legend class="border-bottom mb-2">Indicator: {{indicator.name}}({{indicator.id}})
        <div class="float-right">
            <a class="btn btn-primary btn-sm mt-1 mb-1" href="{{url_for('indicator.indicator_upload', indicator_id=indicator.id )}}">Upload</a>
            <button type="button" class="btn btn-danger btn-sm m-1" data-toggle="modal" data-target="#deleteModal">Delete</button>
            <a class="btn btn-secondary btn-sm mt-1 mb-1" href="{{url_for('indicator.indicators')}}">Back</a>
        </div>
    </legend>
    <ul class="nav nav-tabs md-tabs" id="myTabMD" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="home-tab-md" data-toggle="tab" href="#home-md" role="tab" aria-controls="home-md"
               aria-selected="true">Variables</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="profile-tab-md" data-toggle="tab" href="#profile-md" role="tab" aria-controls="profile-md"
               aria-selected="false">Buy Info</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="contact-tab-md" data-toggle="tab" href="#contact-md" role="tab" aria-controls="contact-md"
               aria-selected="false">Sell Info</a>
        </li>
    </ul>
    <div class="tab-content card pt-2" id="myTabContentMD">
        <div class="tab-pane fade show active" id="home-md" role="tabpanel" aria-labelledby="home-tab-md">
            <form method="POST" action="">
                {{ form.hidden_tag() }}
                <fieldset class="from-group mb-4">
                    <div class="from-group">
                        {{ form.maxstocks.label(class="form-control-label") }}
                        {% if form.maxstocks.errors %}
                        {{ form.maxstocks(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in form.maxstocks.errors %}
                            <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                        {% else %}
                        {{ form.maxstocks(class="form-control") }}
                        {% endif %}
                    </div>
                    <div class="from-group">
                        {{ form.maxdays.label(class="form-control-label") }}
                        {% if form.maxdays.errors %}
                        {{ form.maxdays(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in form.maxdays.errors %}
                            <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                        {% else %}
                        {{ form.maxdays(class="form-control") }}
                        {% endif %}
                    </div>
                    <div class="from-group">
                        {{ form.target1.label(class="form-control-label") }}
                        {% if form.target1.errors %}
                        {{ form.target1(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in form.target1.errors %}
                            <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                        {% else %}
                        {{ form.target1(class="form-control") }}
                        {% endif %}
                    </div>
                    <div class="from-group">
                        {{ form.target2.label(class="form-control-label") }}
                        {% if form.target2.errors %}
                        {{ form.target2(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in form.target2.errors %}
                            <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                        {% else %}
                        {{ form.target2(class="form-control") }}
                        {% endif %}
                    </div>
                    <div class="from-group">
                        {{ form.cutloss.label(class="form-control-label") }}
                        {% if form.cutloss.errors %}
                        {{ form.cutloss(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in form.cutloss.errors %}
                            <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                        {% else %}
                        {{ form.cutloss(class="form-control") }}
                        {% endif %}
                    </div>
                    <div class="from-group">
                        {{ form.minvolume.label(class="form-control-label") }}
                        {% if form.minvolume.errors %}
                        {{ form.minvolume(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in form.minvolume.errors %}
                            <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                        {% else %}
                        {{ form.minvolume(class="form-control") }}
                        {% endif %}
                    </div>
                    <div class="from-group mb-2">
                        {{ form.minbuy.label(class="form-control-label") }}
                        {% if form.minbuy.errors %}
                        {{ form.minbuy(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in form.minbuy.errors %}
                            <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                        {% else %}
                        {{ form.minbuy(class="form-control") }}
                        {% endif %}
                    </div>
                    <div class="from-group">
                        {{ form.tradingfee.label(class="form-control-label") }}
                        {% if form.tradingfee.errors %}
                        {{ form.tradingfee(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in form.tradingfee.errors %}
                            <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                        {% else %}
                        {{ form.tradingfee(class="form-control") }}
                        {% endif %}
                    </div>
                    <div class="from-group">
                        {{ form.maxtradingfee.label(class="form-control-label") }}
                        {% if form.maxtradingfee.errors %}
                        {{ form.maxtradingfee(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in form.maxtradingfee.errors %}
                            <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                        {% else %}
                        {{ form.maxtradingfee(class="form-control") }}
                        {% endif %}
                    </div>
                    <div class="form-check mb-2">
                        {{ form.hongkongstocks(class="form-check-input") }}
                        {{ form.hongkongstocks.label(class="form-check-label") }}
                    </div>
                </fieldset>
                <div class="from-group">
                    {{ form.submit(class="btn btn-outline-info") }}
                </div>
            </form>
        </div>
        <div class="tab-pane fade" id="profile-md" role="tabpanel" aria-labelledby="profile-tab-md">
            <table class="table table-striped table-bordered">
                <tr>
                    <th>Date</th>
                    <th>Symbol</th>
                    <th>Buy Price</th>
                    <th>Open</th>
                    <th>High</th>
                    <th>Low</th>
                    <th>Close</th>
                </tr>
                {% for buyinput in buyinputs%}
                    <tr>
                        <td>{{buyinput.buydate}}</td>
                        <td>{{buyinput.symbol}}</td>
                        <td>{{"%.2f" % buyinput.buyprice}}</td>
                        <td>{{"%.2f" % buyinput.openprice}}</td>
                        <td>{{"%.2f" % buyinput.highprice}}</td>
                        <td>{{"%.2f" % buyinput.lowprice}}</td>
                        <td>{{"%.2f" % buyinput.closeprice}}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
        <div class="tab-pane fade" id="contact-md" role="tabpanel" aria-labelledby="contact-tab-md">
            <table class="table table-striped table-bordered">
                <tr>
                    <th>Date</th>
                    <th>Symbol</th>
                    <th>Sell Price</th>
                </tr>
                {% for sellinput in sellinputs%}
                    <tr>
                        <td>{{sellinput.selldate}}</td>
                        <td>{{sellinput.symbol}}</td>
                        <td>{{"%.2f" % sellinput.sellprice}}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
    </div>
</div>
<!-- Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteModalLabel">Delete Indicator?</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <form action="{{ url_for('indicator.delete_indicator', indicator_id=indicator.id )}}" method="POST">
                    <input class="btn btn-danger" type="submit" value="Delete">
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}